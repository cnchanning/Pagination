define("easy-pagination/1.0.0/pagination",["arale-widget/1.2.0/widget","arale-base/1.2.0/base","arale-class/1.2.0/class","arale-events/1.2.0/events","jquery/1.7.2/jquery"],function(t,e,a){function s(t){return{UI_PAGINATION:t,UI_PREV:t+"-prev",UI_NEXT:t+"-next",UI_ITEM:t+"-item",UI_CURRENT:t+"-current"}}var i=t("arale-widget/1.2.0/widget"),n=t("jquery/1.7.2/jquery"),r=i.extend({attrs:{total_items:null,items_per_page:10,num_display:5,current_page:1,num_edge:1,prev_text:"\u4e0a\u4e00\u9875",next_text:"\u4e0b\u4e00\u9875",ellipse_text:"...",prev_always:!0,next_always:!0,classprefix:"ui-pagination",panel:null,callback:function(){return!1}},setup:function(){this.CLASS=s(this.get("classprefix")),this._initPanle(),this.set("total_page",this._getNumPages(this.get("total_items"),this.get("items_per_page"))),this._drawLinks(),this.delegateEvents("click ."+this.CLASS.UI_ITEM,this._clickHandle),this.delegateEvents("click ."+this.CLASS.UI_PREV,this.prev),this.delegateEvents("click ."+this.CLASS.UI_NEXT,this.next),this.render()},_initPanle:function(){var t=this.$("[data-role = pagination]");if(!this.element&&!t.length)throw new Error("element or data-role=panel must be required!");this.element?this.set("panel",this.element):this.set("panel",t),this.get("panel").addClass(this.CLASS.UI_PAGINATION)},_getNumPages:function(t,e){if(!t)throw new Error("total_items must be required!");return Math.ceil(t/e)},_getNumIntervel:function(t){var e=Math.ceil(this.get("num_display")/2),a=t-this.get("num_display"),s=this.get("current_page")>e?Math.max(Math.min(+this.get("current_page")-e,a),1):1,i=this.get("current_page")>e?Math.min(+this.get("current_page")+e-2,t):Math.min(+this.get("num_display"),t);return[s,i]},_drawLinks:function(){var t=+this.get("total_page"),e=this._getNumIntervel(t),a=+this.get("current_page"),s=this.get("panel"),i=this.get("prev_text"),r=this.get("next_text"),l=this.get("prev_always"),h=this.get("next_always"),g=this.get("num_edge"),p=this.get("ellipse_text"),_=this;s.empty();var u=function(e,i){var r;e=1>e+1?1:t>e?e:t,i=n.extend({text:e,classes:""},i||{}),r=n(e===a?"<span class="+_.CLASS.UI_CURRENT+">"+i.text+"</span>":"<a href='javascript:void(0)'>"+i.text+"</a>"),i.classes&&r.addClass(i.classes),s.append(r)};if((a&&a>1||l)&&u(a-2,{text:i,classes:this.CLASS.UI_PREV}),e[0]>1&&g>0){for(var c=Math.min(g,e[0]),o=0;c>o;o++)u(o+1,{classes:this.CLASS.UI_ITEM});g<e[0]&&p&&n("<span>"+p+"</span>").appendTo(s)}for(var o=e[0];o<=e[1];o++)u(o,{classes:this.CLASS.UI_ITEM});if(e[1]<t&&g>0){t-g>e[1]&&p&&n("<span>"+p+"</span>").appendTo(s);for(var d=Math.max(t-g,e[1]),o=d+1;t>=o;o++)u(o,{classes:this.CLASS.UI_ITEM})}r&&(t-1>a||h)&&u(a+3,{text:r,classes:this.CLASS.UI_NEXT}),this.get("callback")(a,this.get("panel"))},_clickHandle:function(t){var e=+t.currentTarget.innerText;this.jumpTo(e)},_onRenderCurrent_page:function(){this._drawLinks()},next:function(){var t=this.get("current_page")===this.get("total_page")?this.get("total_page"):+this.get("current_page")+1;this.jumpTo(t)},prev:function(){var t=1===this.get("current_page")?1:+this.get("current_page")-1;this.jumpTo(t)},jumpTo:function(t){if(!(t>=1&&t<=this.get("total_page")))throw new Error("index is invalid\uff01");this.set("current_page",t)},getTotalPage:function(){return+this.get("total_page")},getCurrentPage:function(){return+this.get("current_page")}});a.exports=r});